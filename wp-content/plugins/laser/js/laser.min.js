/**
 * Laser
 * Page Loading Progress Bar.
 * Exclusively on https://1.envato.market/laser
 *
 * @encoding        UTF-8
 * @version         1.1.0
 * @copyright       (C) 2018 - 2020 Merkulove ( https://merkulov.design/ ). All rights reserved.
 * @license         Envato License https://1.envato.market/KYbje
 * @contributors    Alexander Khmelnitskiy (info@alexander.khmelnitskiy.ua), Dmitry Merkulov (dmitry@merkulov.design)
 * @support         help@merkulov.design
 **/
"use strict";!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.mdpLaserPlugin=e()}(this,(function(){let t={version:"1.1.0"};const e=window.mdpLaserWP;let n=t.settings={minimum:.08,easing:e.easing,positionUsing:"",speed:e.speed,trickle:"on"===e.trickle,trickleSpeed:e.speed,barSelector:".mdp-laser",parent:"body",template:'<div class="mdp-laser"></div>'};function o(t,e,n){return t<e?e:t>n?n:t}function r(t){return"on"===e.reverse?100-100*t:100*(-1+t)}t.configure=function(t){let e,o;for(e in t)o=t[e],void 0!==o&&t.hasOwnProperty(e)&&(n[e]=o);return this},t.status=null,t.set=function(e){let l=t.isStarted();e=o(e,n.minimum,1),t.status=1===e?null:e;let a=t.render(!l),u=a.querySelector(n.barSelector),d=n.speed,c=n.easing;return a.offsetWidth,i((function(o){""===n.positionUsing&&(n.positionUsing=t.getPositioningCSS()),s(u,function(t,e,o){let i;i="translate3d"===n.positionUsing?{transform:"translate3d("+r(t)+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+r(t)+"%,0)"}:{"margin-left":r(t)+"%"};return i.transition="all "+e+"ms "+o,i}(e,d,c)),1===e?(s(a,{transition:"none",opacity:1}),a.offsetWidth,setTimeout((function(){s(a,{transition:"all "+d+"ms linear",opacity:0}),setTimeout((function(){t.remove(),o()}),d)}),d)):setTimeout(o,d)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);let e=function(){setTimeout((function(){t.status&&(t.trickle(),localStorage.setItem("mdpLaserStatus",t.status),e())}),n.trickleSpeed)};return n.trickle&&e(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){let n=t.status;return n?n>1?void 0:("number"!=typeof e&&(e=n>=0&&n<.2?.1:n>=.2&&n<.5?.04:n>=.5&&n<.8?.02:n>=.8&&n<.99?.005:0),n=o(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc()},function(){let e=0,n=0;t.promise=function(o){return o&&"resolved"!==o.state()?(0===n&&t.start(),e++,n++,o.always((function(){n--,0===n?(e=0,t.done()):t.set((e-n)/e)})),this):this}}(),t.render=function(o){if(t.isRendered())return document.getElementById("mdp-laser");a(document.documentElement,"mdp-laser-busy");let i=document.createElement("div");i.id="mdp-laser",i.innerHTML=n.template;let l,u=i.querySelector(n.barSelector),d=document.querySelector(n.parent);if(l="on"===e.reverse?o?"100":r(t.status||0):o?"-100":r(t.status||0),i.style.height=e.height+"px",i.style.position="fixed",i.style.zIndex="99999",i.style.backgroundColor=e.bgColor,u.style.height=e.height+"px",u.style.position="fixed",u.style.left=0,u.style.width="100%","string"==typeof e.style&&(u.style.backgroundColor=e.color,"gradient"===e.style&&(u.style.backgroundImage="linear-gradient( to left, "+e.color+", "+e.gradient+" )"),"pulse"===e.style)){let t='.mdp-laser:after { content: ""; opacity: 0; position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #fff; animation: mdp-laser-pulse 1s linear infinite; }';t+="@keyframes mdp-laser-pulse { 0% { opacity: 0; width: 0; } 50% { opacity: .4; } 100% { opacity: 0; width: 98%; } }";let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");e.appendChild(n),n.appendChild(document.createTextNode(t))}return"on"===e.reverse&&(u.style.left="auto !important",u.style.right=0),"string"==typeof e.position&&("bottom"===e.position&&(i.style.width="100wh",i.style.bottom="0"),"top"===e.position&&(i.style.width="100wh",i.style.top="0"),"left"===e.position&&(i.style.width="100vh",i.style.top="0",i.style.left=e.height+"px",i.style.transform="rotate( 90deg )",i.style.transformOrigin="left top"),"right"===e.position&&(i.style.width="100vh",i.style.bottom="0",i.style.right=e.height+"px",i.style.transform="rotate( 90deg )",i.style.transformOrigin="right bottom")),"string"==typeof e.boxShadow&&"on"===e.boxShadow&&(u.style.boxShadow="0 0 10px "+e.color+", 0 0 5px "+e.color),s(u,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),d!==document.body&&a(d,"mdp-laser-custom-parent"),d.appendChild(i),i},t.remove=function(){u(document.documentElement,"mdp-laser-busy"),u(document.querySelector(n.parent),"mdp-laser-custom-parent");let t=document.getElementById("mdp-laser");var e;t&&((e=t)&&e.parentNode&&e.parentNode.removeChild(e))},t.isRendered=function(){return!!document.getElementById("mdp-laser")},t.getPositioningCSS=function(){let t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};let i=function(){let t=[];function e(){let n=t.shift();n&&n(e)}return function(n){t.push(n),1===t.length&&e()}}(),s=function(){let t=["Webkit","O","Moz","ms"],e={};function n(n){return n=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})),e[n]||(e[n]=function(e){let n=document.body.style;if(e in n)return e;let o,r=t.length,i=e.charAt(0).toUpperCase()+e.slice(1);for(;r--;)if(o=t[r]+i,o in n)return o;return e}(n))}function o(t,e,o){e=n(e),t.style[e]=o}return function(t,e){let n,r,i=arguments;if(2===i.length)for(n in e)r=e[n],void 0!==r&&e.hasOwnProperty(n)&&o(t,n,r);else o(t,i[1],i[2])}}();function l(t,e){return("string"==typeof t?t:d(t)).indexOf(" "+e+" ")>=0}function a(t,e){let n=d(t),o=n+e;l(n,e)||(t.className=o.substring(1))}function u(t,e){let n,o=d(t);l(t,e)&&(n=o.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function d(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}return t})),window.addEventListener("beforeunload",(function(){mdpLaserPlugin.start()})),document.addEventListener("DOMContentLoaded",(function(){let t=localStorage.getItem("mdpLaserStatus");t=parseFloat(t),mdpLaserPlugin.set(t),mdpLaserPlugin.start()})),window.addEventListener("load",(function(){mdpLaserPlugin.done(!0)}));